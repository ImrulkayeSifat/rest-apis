let DEBUG_MODE,ValidationError,CustomErrorHandler;_f5b‍.x([["default",()=>_f5b‍.o]]);_f5b‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_f5b‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_f5b‍.w("../services/CustomErrorHandler",[["default",["CustomErrorHandler"],function(v){CustomErrorHandler=v}]]);



const errorHandler = (err,req,res,next) => {
  let statusCode = 500;

  let data = {
    message: 'Internal server error',
    ...DEBUG_MODE(DEBUG_MODE === 'true' && { originalError: err.message })
  }

  if(err instanceof ValidationError) {
    statusCode = 422;
    data={
      message:err.message
    }
  }

  if(err instanceof CustomErrorHandler){
    statusCode = err.status;
    data={
      message:err.message
    }
  }

  return res.status().json(data);
}

_f5b‍.d(errorHandler);